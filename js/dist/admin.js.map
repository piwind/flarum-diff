{"version":3,"file":"admin.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,mBCAlF,MAAM,EAA+BI,OAAOC,KAAKC,OAAO,c,aCAxD,SAASC,EAAgBC,EAAGC,GAC1B,OAAOF,EAAkBZ,OAAOe,eAAiBf,OAAOe,eAAeC,OAAS,SAAUH,EAAGC,GAC3F,OAAOD,EAAEI,UAAYH,EAAGD,CAC1B,EAAGD,EAAgBC,EAAGC,EACxB,CCJA,MAAM,EAA+BL,OAAOC,KAAKC,OAAO,kC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCMlDO,EAAiB,eACjBC,EAAe,8BAEAC,EAAgB,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAC,MAAA,KAAAC,YAAA,KCRrC,IAAwBV,EAAGd,IDQUsB,GCRbR,EDQaO,GCPjCd,UAAYN,OAAOwB,OAAOzB,EAAEO,WAAYO,EAAEP,UAAUmB,YAAcZ,EAAGE,EAAeF,EAAGd,GDOtD,IAAA2B,EAAAN,EAAAd,UAiNlC,OAjNkCoB,EACnCC,OAAA,SAAOC,GACLP,EAAAf,UAAMqB,OAAMnB,KAAC,KAAAoB,EACf,EAACF,EAEDG,QAAA,WAAU,IAAAC,EAAA,KACR,MAAO,CACLC,EAAE,aAAc,CACdA,EAAE,oBAAqB,CACrBA,EAAE,cAAe,CACfA,EACE,QACAC,IAAAA,UACE,CACEC,MAAgE,MAAzDC,KAAKC,QAAQjB,EAAiB,eAAgB,IAA9CgB,GACPE,SAAU,SAACC,GACTP,EAAKK,QAAQjB,EAAiB,eAA9BY,CAA8CO,EAAQ,IAAM,IAC9D,GAEFC,IAAAA,WAAeC,MAAMpB,EAAe,oBAI1CY,EAAE,cAAe,CACfA,EACE,QACAC,IAAAA,UACE,CACEC,MAAiE,MAA1DC,KAAKC,QAAQjB,EAAiB,gBAAiB,IAA/CgB,GACPE,SAAU,SAACC,GACTP,EAAKK,QAAQjB,EAAiB,gBAA9BY,CAA+CO,EAAQ,IAAM,IAC/D,GAEFC,IAAAA,WAAeC,MAAMpB,EAAe,qBAI1CY,EAAE,cAAe,CACfA,EACE,QACAC,IAAAA,UACE,CACEC,MAAkE,MAA3DC,KAAKC,QAAQjB,EAAiB,iBAAkB,IAAhDgB,GACPE,SAAU,SAACC,GACTP,EAAKK,QAAQjB,EAAiB,iBAA9BY,CAAgDO,EAAQ,IAAM,IAChE,GAEFC,IAAAA,WAAeC,MAAMpB,EAAe,sBAI1CY,EAAE,cAAe,CACfA,EAAE,QAASO,IAAAA,WAAeC,MAAMpB,EAAe,gBAC/CY,EACE,MACAS,IAAAA,UAAiB,CACfC,QAAS,CACPC,KAAMJ,IAAAA,WAAeC,MAAMpB,EAAe,aAC1CwB,KAAML,IAAAA,WAAeC,MAAMpB,EAAe,aAC1CyB,KAAMN,IAAAA,WAAeC,MAAMpB,EAAe,aAC1C0B,KAAMP,IAAAA,WAAeC,MAAMpB,EAAe,cAE5CiB,SAAUF,KAAKC,QAAQjB,EAAiB,eACxCmB,MAAOH,KAAKC,QAAQjB,EAAiB,cAA9BgB,IAAkDA,KAAKC,QAAQjB,EAAiB,cAA9BgB,CAA6C,aAI5GH,EAAE,cAAe,CACfA,EAAE,QAASO,IAAAA,WAAeC,MAAMpB,EAAe,kBAC/CY,EAAE,YAAaO,IAAAA,WAAeC,MAAMpB,EAAe,sBACnDY,EACE,MACA,CACEe,UAAW,YAEbf,EAAE,IAAK,CACLe,UAAW,+CAEbf,EAAE,OAAQO,IAAAA,WAAeC,MAAMpB,EAAe,kBAEhDY,EAAE,+BAAgC,CAChCgB,KAAMb,KAAKC,QAAQjB,EAAiB,gBAAiB,KACrD8B,YAAa,IACbC,MAAO,gBAGXlB,EAAE,cAAe,CACfA,EAAE,QAASO,IAAAA,WAAeC,MAAMpB,EAAe,mBAC/CY,EAAE,YAAaO,IAAAA,WAAeC,MAAMpB,EAAe,uBACnDY,EACE,MACA,CACEe,UAAW,YAEbf,EAAE,IAAK,CACLe,UAAW,+CAEbf,EAAE,OAAQO,IAAAA,WAAeC,MAAMpB,EAAe,cAEhDY,EAAE,+BAAgC,CAChCgB,KAAMb,KAAKC,QAAQjB,EAAiB,iBAAkB,OACtD8B,YAAa,MACbC,MAAO,gBAGXlB,EAAE,cAAe,CACfA,EAAE,QAASO,IAAAA,WAAeC,MAAMpB,EAAe,mBAC/CY,EAAE,YAAaO,IAAAA,WAAeC,MAAMpB,EAAe,gBACnDY,EACE,QACAC,IAAAA,UACE,CACEC,MAA+D,MAAxDC,KAAKC,QAAQjB,EAAiB,cAAe,IAA7CgB,GACPE,SAAU,SAACC,GACTP,EAAKK,QAAQjB,EAAiB,cAA9BY,CAA6CO,EAAQ,IAAM,IAC7D,GAEFC,IAAAA,WAAeC,MAAMpB,EAAe,iBAGxCY,EACE,MACA,CACEe,UAAW,YAEbf,EAAE,OAAQO,IAAAA,WAAeC,MAAMpB,EAAe,qBAEhDY,EACE,MACA,CACEe,UAAW,YAEbf,EAAE,IAAK,CACLe,UAAW,+CAEbf,EAAE,OAAQO,IAAAA,WAAeC,MAAMpB,EAAe,cAEhDY,EACE,MACA,CACEe,UAAW,oBAEbf,EACE,MACAA,EAAE,cAAe,CACfA,EAAE,QAASA,EAAA,cAAQ,OACnBA,EACE,MACAA,EAAE,+BAAgC,CAChCgB,KAAMb,KAAKC,QAAQjB,EAAiB,eAAgB,MACpD8B,YAAa,WAKrBjB,EACE,MACAA,EAAE,cAAe,CACfA,EAAE,QAASA,EAAA,cAAQ,OACnBA,EACE,MACAA,EAAE,+BAAgC,CAChCgB,KAAMb,KAAKC,QAAQjB,EAAiB,eAAgB,OACpD8B,YAAa,YAKrBjB,EACE,MACAA,EAAE,cAAe,CACfA,EAAE,QAASA,EAAA,cAAQ,OACnBA,EACE,MACAA,EAAE,+BAAgC,CAChCgB,KAAMb,KAAKC,QAAQjB,EAAiB,qBAAsB,KAC1D8B,YAAa,WAMvBjB,EACE,QACAC,IAAAA,UACE,CACEC,MAA4D,MAArDC,KAAKC,QAAQjB,EAAiB,WAAY,IAA1CgB,GACPE,SAAU,SAACC,GACTP,EAAKK,QAAQjB,EAAiB,WAA9BY,CAA0CO,EAAQ,IAAM,IAC1D,GAEFC,IAAAA,WAAeC,MAAMpB,EAAe,cAGxCY,EACE,MACA,CACEe,UAAW,YAEbf,EAAE,IAAK,CACLe,UAAW,+CAEbf,EAAE,OAAQO,IAAAA,WAAeC,MAAMpB,EAAe,oBAGlDe,KAAKgB,mBAIb,EAAC9B,CAAA,CAjNkC,CAAS+B,KEN9Cb,IAAAA,aAAiBc,IAAI,eAAe,SAACd,GACnCA,EAAIe,cAAa,IACV,eACJC,aAAalC,GACbmC,mBACC,CAEEC,KAAM,iBACNC,MAAOnB,EAAIoB,WAAWnB,MAAM,iDAC5BoB,WAAY,kBACZC,YAAY,GAEd,QAEDL,mBACC,CAEEC,KAAM,eACNC,MAAOnB,EAAIoB,WAAWnB,MAAM,mDAC5BoB,WAAY,oBACZC,YAAY,GAEd,YAEDL,mBACC,CAEEC,KAAM,eACNC,MAAOnB,EAAIoB,WAAWnB,MAAM,uDAC5BoB,WAAY,wBACZC,YAAY,GAEd,YAEDL,mBACC,CAEEC,KAAM,iBACNC,MAAOnB,EAAIoB,WAAWnB,MAAM,qDAC5BoB,WAAY,sBACZC,YAAY,GAEd,YAEDL,mBACC,CAEEC,KAAM,iBACNC,MAAOnB,EAAIoB,WAAWnB,MAAM,yDAC5BoB,WAAY,0BACZC,YAAY,GAEd,WAEN,G","sources":["webpack://@piwind/flarum-diff/webpack/bootstrap","webpack://@piwind/flarum-diff/webpack/runtime/compat get default export","webpack://@piwind/flarum-diff/webpack/runtime/define property getters","webpack://@piwind/flarum-diff/webpack/runtime/hasOwnProperty shorthand","webpack://@piwind/flarum-diff/external root \"flarum.core.compat['common/app']\"","webpack://@piwind/flarum-diff/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@piwind/flarum-diff/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@piwind/flarum-diff/external root \"flarum.core.compat['common/components/Select']\"","webpack://@piwind/flarum-diff/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@piwind/flarum-diff/./src/admin/DiffSettingsPage.js","webpack://@piwind/flarum-diff/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@piwind/flarum-diff/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","import app from 'flarum/common/app';\r\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\r\nimport Select from 'flarum/common/components/Select';\r\nimport Switch from 'flarum/common/components/Switch';\r\n\r\n// just to make things easier\r\nconst settingsPrefix = 'piwind-diff.';\r\nconst localePrefix = 'piwind-diff.admin.settings.';\r\n\r\nexport default class DiffSettingsPage extends ExtensionPage {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n  }\r\n\r\n  content() {\r\n    return [\r\n      m('.container', [\r\n        m('.DiffSettingsPage', [\r\n          m('.Form-group', [\r\n            m(\r\n              'label',\r\n              Switch.component(\r\n                {\r\n                  state: this.setting(settingsPrefix + 'mainPostOnly', '0')() === '1',\r\n                  onchange: (value) => {\r\n                    this.setting(settingsPrefix + 'mainPostOnly')(value ? '1' : '0');\r\n                  },\r\n                },\r\n                app.translator.trans(localePrefix + 'mainPostOnly')\r\n              )\r\n            ),\r\n          ]),\r\n          m('.Form-group', [\r\n            m(\r\n              'label',\r\n              Switch.component(\r\n                {\r\n                  state: this.setting(settingsPrefix + 'separateBlock', '1')() === '1',\r\n                  onchange: (value) => {\r\n                    this.setting(settingsPrefix + 'separateBlock')(value ? '1' : '0');\r\n                  },\r\n                },\r\n                app.translator.trans(localePrefix + 'separateBlock')\r\n              )\r\n            ),\r\n          ]),\r\n          m('.Form-group', [\r\n            m(\r\n              'label',\r\n              Switch.component(\r\n                {\r\n                  state: this.setting(settingsPrefix + 'textFormatting', '1')() === '1',\r\n                  onchange: (value) => {\r\n                    this.setting(settingsPrefix + 'textFormatting')(value ? '1' : '0');\r\n                  },\r\n                },\r\n                app.translator.trans(localePrefix + 'textFormatting')\r\n              )\r\n            ),\r\n          ]),\r\n          m('.Form-group', [\r\n            m('label', app.translator.trans(localePrefix + 'detailLevel')),\r\n            m(\r\n              'div',\r\n              Select.component({\r\n                options: {\r\n                  none: app.translator.trans(localePrefix + 'noneLevel'),\r\n                  line: app.translator.trans(localePrefix + 'lineLevel'),\r\n                  word: app.translator.trans(localePrefix + 'wordLevel'),\r\n                  char: app.translator.trans(localePrefix + 'charLevel'),\r\n                },\r\n                onchange: this.setting(settingsPrefix + 'detailLevel'),\r\n                value: this.setting(settingsPrefix + 'detailLevel')() || this.setting(settingsPrefix + 'detailLevel')('line'),\r\n              })\r\n            ),\r\n          ]),\r\n          m('.Form-group', [\r\n            m('label', app.translator.trans(localePrefix + 'neighborLines')),\r\n            m('.helpText', app.translator.trans(localePrefix + 'neighborLinesHelp')),\r\n            m(\r\n              'div',\r\n              {\r\n                className: 'helpText',\r\n              },\r\n              m('i', {\r\n                className: 'diffSettingsIcon fas fa-exclamation-circle',\r\n              }),\r\n              m('span', app.translator.trans(localePrefix + 'onlyUnsigned'))\r\n            ),\r\n            m('input[type=text].FormControl', {\r\n              bidi: this.setting(settingsPrefix + 'neighborLines', '2'),\r\n              placeholder: '2',\r\n              style: 'width:25%',\r\n            }),\r\n          ]),\r\n          m('.Form-group', [\r\n            m('label', app.translator.trans(localePrefix + 'mergeThreshold')),\r\n            m('.helpText', app.translator.trans(localePrefix + 'mergeThresholdHelp')),\r\n            m(\r\n              'div',\r\n              {\r\n                className: 'helpText',\r\n              },\r\n              m('i', {\r\n                className: 'diffSettingsIcon fas fa-exclamation-circle',\r\n              }),\r\n              m('span', app.translator.trans(localePrefix + 'usePoint'))\r\n            ),\r\n            m('input[type=text].FormControl', {\r\n              bidi: this.setting(settingsPrefix + 'mergeThreshold', '0.8'),\r\n              placeholder: '0.8',\r\n              style: 'width:25%',\r\n            }),\r\n          ]),\r\n          m('.Form-group', [\r\n            m('label', app.translator.trans(localePrefix + 'dbOptimisation')),\r\n            m('.helpText', app.translator.trans(localePrefix + 'archiveInfo')),\r\n            m(\r\n              'label',\r\n              Switch.component(\r\n                {\r\n                  state: this.setting(settingsPrefix + 'archiveOlds', '0')() === '1',\r\n                  onchange: (value) => {\r\n                    this.setting(settingsPrefix + 'archiveOlds')(value ? '1' : '0');\r\n                  },\r\n                },\r\n                app.translator.trans(localePrefix + 'archiveOlds')\r\n              )\r\n            ),\r\n            m(\r\n              'div',\r\n              {\r\n                className: 'helpText',\r\n              },\r\n              m('span', app.translator.trans(localePrefix + 'archiveOldsInfo'))\r\n            ),\r\n            m(\r\n              'div',\r\n              {\r\n                className: 'helpText',\r\n              },\r\n              m('i', {\r\n                className: 'diffSettingsIcon fas fa-exclamation-circle',\r\n              }),\r\n              m('span', app.translator.trans(localePrefix + 'usePoint'))\r\n            ),\r\n            m(\r\n              'div',\r\n              {\r\n                className: 'diffSettingsFlex',\r\n              },\r\n              m(\r\n                'div',\r\n                m('.Form-group', [\r\n                  m('label', <strong>A:</strong>),\r\n                  m(\r\n                    'div',\r\n                    m('input[type=text].FormControl', {\r\n                      bidi: this.setting(settingsPrefix + 'archiveLimit', '15'),\r\n                      placeholder: '15',\r\n                    })\r\n                  ),\r\n                ])\r\n              ),\r\n              m(\r\n                'div',\r\n                m('.Form-group', [\r\n                  m('label', <strong>m:</strong>),\r\n                  m(\r\n                    'div',\r\n                    m('input[type=text].FormControl', {\r\n                      bidi: this.setting(settingsPrefix + 'archiveSlope', '0.4'),\r\n                      placeholder: '0.4',\r\n                    })\r\n                  ),\r\n                ])\r\n              ),\r\n              m(\r\n                'div',\r\n                m('.Form-group', [\r\n                  m('label', <strong>b:</strong>),\r\n                  m(\r\n                    'div',\r\n                    m('input[type=text].FormControl', {\r\n                      bidi: this.setting(settingsPrefix + 'archiveCoefficient', '0'),\r\n                      placeholder: '0',\r\n                    })\r\n                  ),\r\n                ])\r\n              )\r\n            ),\r\n            m(\r\n              'label',\r\n              Switch.component(\r\n                {\r\n                  state: this.setting(settingsPrefix + 'useCrons', '0')() === '1',\r\n                  onchange: (value) => {\r\n                    this.setting(settingsPrefix + 'useCrons')(value ? '1' : '0');\r\n                  },\r\n                },\r\n                app.translator.trans(localePrefix + 'useCrons')\r\n              )\r\n            ),\r\n            m(\r\n              'div',\r\n              {\r\n                className: 'helpText',\r\n              },\r\n              m('i', {\r\n                className: 'diffSettingsIcon fas fa-exclamation-circle',\r\n              }),\r\n              m('span', app.translator.trans(localePrefix + 'useCronsHelp'))\r\n            ),\r\n          ]),\r\n          this.submitButton(),\r\n        ]),\r\n      ]),\r\n    ];\r\n  }\r\n}\r\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","import app from 'flarum/common/app';\r\nimport DiffSettingsPage from './DiffSettingsPage';\r\n\r\napp.initializers.add('piwind-diff', (app) => {\r\n  app.extensionData\r\n    .for('piwind-diff')\r\n    .registerPage(DiffSettingsPage)\r\n    .registerPermission(\r\n      {\r\n        // who can view edit history?\r\n        icon: 'fas fa-history',\r\n        label: app.translator.trans('piwind-diff.admin.permissions.viewEditHistory'),\r\n        permission: 'viewEditHistory',\r\n        allowGuest: false,\r\n      },\r\n      'view'\r\n    )\r\n    .registerPermission(\r\n      {\r\n        // who can delete others edit history?\r\n        icon: 'fas fa-times',\r\n        label: app.translator.trans('piwind-diff.admin.permissions.deleteEditHistory'),\r\n        permission: 'deleteEditHistory',\r\n        allowGuest: false,\r\n      },\r\n      'moderate'\r\n    )\r\n    .registerPermission(\r\n      {\r\n        // who can delete their own edit history?\r\n        icon: 'fas fa-times',\r\n        label: app.translator.trans('piwind-diff.admin.permissions.selfDeleteEditHistory'),\r\n        permission: 'selfDeleteEditHistory',\r\n        allowGuest: false,\r\n      },\r\n      'moderate'\r\n    )\r\n    .registerPermission(\r\n      {\r\n        // who can rollback others edit history?\r\n        icon: 'fas fa-history',\r\n        label: app.translator.trans('piwind-diff.admin.permissions.rollbackEditHistory'),\r\n        permission: 'rollbackEditHistory',\r\n        allowGuest: false,\r\n      },\r\n      'moderate'\r\n    )\r\n    .registerPermission(\r\n      {\r\n        // who can rollback their own edit history?\r\n        icon: 'fas fa-history',\r\n        label: app.translator.trans('piwind-diff.admin.permissions.selfRollbackEditHistory'),\r\n        permission: 'selfRollbackEditHistory',\r\n        allowGuest: false,\r\n      },\r\n      'moderate'\r\n    );\r\n});\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","settingsPrefix","localePrefix","DiffSettingsPage","_ExtensionPage","apply","arguments","create","constructor","_proto","oninit","vnode","content","_this","m","Switch","state","this","setting","onchange","value","app","trans","Select","options","none","line","word","char","className","bidi","placeholder","style","submitButton","ExtensionPage","add","extensionData","registerPage","registerPermission","icon","label","translator","permission","allowGuest"],"sourceRoot":""}